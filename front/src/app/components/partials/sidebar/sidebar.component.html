<aside
  [class]="isSidebarOpen ? 'translate-x-0 lg:w-[260px]' : '-translate-x-full lg:w-[90px] lg:translate-x-0'"
  class="sidebar group fixed left-0 top-0 z-[99999] flex h-screen flex-col overflow-hidden border-r border-gray-200 bg-white dark:border-gray-800 dark:bg-black lg:static lg:hover:w-[260px] transition-all duration-300 ease-in-out"
>
<!-- SIDEBAR HEADER WITH LOGO -->
<div class="flex items-center justify-center h-16 border-b border-gray-100 dark:border-gray-800">
  <a routerLink="/" class="flex items-center">
    <!-- Show small logo (logo.png) when collapsed and NOT hovering -->
    <img 
      *ngIf="!isSidebarOpen"
      class="h-8 w-auto dark:hidden lg:block lg:group-hover:hidden" 
      src="assets/logo.png" 
      alt="Logo" 
    />
    <img
      *ngIf="!isSidebarOpen"
      class="hidden h-8 w-auto dark:lg:block lg:group-hover:hidden"
      src="assets/logo.png"
      alt="Logo"
    />
    
    <!-- Show full logo (logo-logo.png) when expanded OR hovering -->
    <img 
      *ngIf="!isSidebarOpen"
      class="h-8 w-auto dark:hidden hidden lg:group-hover:block" 
      src="assets/logo-logo.png" 
      alt="Logo" 
    />
    <img
      *ngIf="!isSidebarOpen"
      class="hidden h-8 w-auto dark:lg:group-hover:block"
      src="assets/logo-logo.png"
      alt="Logo"
    />
    
    <!-- Show full logo (logo-logo.png) when sidebar is EXPANDED (260px) on desktop -->
    <img 
      *ngIf="isSidebarOpen"
      class="h-8 w-auto dark:hidden lg:block" 
      src="assets/logo-logo.png" 
      alt="Logo" 
    />
    <img
      *ngIf="isSidebarOpen"
      class="hidden h-8 w-auto dark:lg:block"
      src="assets/logo-logo.png"
      alt="Logo"
    />
  </a>
</div>

  <!-- COLORLESS GAP/DIVIDER -->
  <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent dark:via-gray-800 mx-4 my-2"></div>

  <!-- SIDEBAR CONTENT (NON-SCROLLABLE) -->
  <div class="flex-1 flex flex-col px-4 py-4">
    <!-- Menu sections will go here -->
   <nav *ngIf="isAdminUser()">
      <div>
        <h3 class="mb-3 text-xs uppercase leading-[18px] text-gray-400">
          <span
            class="menu-group-title"
            [class]="isSidebarOpen ? 'lg:hidden' : ''"
          >
          </span>
        </h3>

        <ul class="flex flex-col gap-2 mb-4">
          <li>
            <a
            
              (click)="navigateAndClose('/admin', 'admin')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'admin' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'admin' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.7071 2.29289C12.3166 1.90237 11.6834 1.90237 11.2929 2.29289L3.29289 10.2929C3.10536 10.4804 3 10.7348 3 11V20C3 20.5523 3.44772 21 4 21H8C8.55228 21 9 20.5523 9 20V16C9 15.4477 9.44772 15 10 15H14C14.5523 15 15 15.4477 15 16V20C15 20.5523 15.4477 21 16 21H20C20.5523 21 21 20.5523 21 20V11C21 10.7348 20.8946 10.4804 20.7071 10.2929L12.7071 2.29289ZM5 11.4142L12 4.41421L19 11.4142V19H17V16C17 14.3431 15.6569 13 14 13H10C8.34315 13 7 14.3431 7 16V19H5V11.4142Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Dashboard' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
             
                                (click)="navigateAndClose('/admin/users', 'Users')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'Users' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'Users' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3 6C3 4.34315 4.34315 3 6 3H8C9.65685 3 11 4.34315 11 6V8C11 9.65685 9.65685 11 8 11H6C4.34315 11 3 9.65685 3 8V6Z"
                  fill="currentColor"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M13 6C13 4.34315 14.3431 3 16 3H18C19.6569 3 21 4.34315 21 6V8C21 9.65685 19.6569 11 18 11H16C14.3431 11 13 9.65685 13 8V6Z"
                  fill="currentColor"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3 16C3 14.3431 4.34315 13 6 13H8C9.65685 13 11 14.3431 11 16V18C11 19.6569 9.65685 21 8 21H6C4.34315 21 3 19.6569 3 18V16Z"
                  fill="currentColor"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M13 16C13 14.3431 14.3431 13 16 13H18C19.6569 13 21 14.3431 21 16V18C21 19.6569 19.6569 21 18 21H16C14.3431 21 13 19.6569 13 18V16Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'User Management' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
              
                                (click)="navigateAndClose('/admin/nomenclatures', 'Nomenclatures')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'Nomenclatures' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'Nomenclatures' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7v-2zm5 5h5v2h-5v-2zm0-10h5v2h-5V6z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Nomenclatures' | translate }}
              </span>
            </a>
          </li>
          
          <li >
            <a
             
                                (click)="navigateAndClose('/admin/projects', 'admin/projects')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'admin/projects' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'admin/projects' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3 3C2.44772 3 2 3.44772 2 4V20C2 20.5523 2.44772 21 3 21H21C21.5523 21 22 20.5523 22 20V4C22 3.44772 21.5523 3 21 3H3ZM4 19V5H20V19H4ZM7 7H17V9H7V7ZM7 11H17V13H7V11ZM7 15H14V17H7V15Z"
                  fill="currentColor"
                />
              </svg>
              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Projects' | translate }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <nav *ngIf="isCommercialUser()">
      <div>
        <h3 class="mb-3 text-xs uppercase leading-[18px] text-gray-400">
          <span
            class="menu-group-title"
            [class]="isSidebarOpen ? 'lg:hidden' : ''"
          >
          </span>
        </h3>

        <ul class="flex flex-col gap-2 mb-4">
          <li>
            <a
              
                  (click)="navigateAndClose('/commercial', 'Commercial')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'commercial' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'commercial' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.7071 2.29289C12.3166 1.90237 11.6834 1.90237 11.2929 2.29289L3.29289 10.2929C3.10536 10.4804 3 10.7348 3 11V20C3 20.5523 3.44772 21 4 21H8C8.55228 21 9 20.5523 9 20V16C9 15.4477 9.44772 15 10 15H14C14.5523 15 15 15.4477 15 16V20C15 20.5523 15.4477 21 16 21H20C20.5523 21 21 20.5523 21 20V11C21 10.7348 20.8946 10.4804 20.7071 10.2929L12.7071 2.29289ZM5 11.4142L12 4.41421L19 11.4142V19H17V16C17 14.3431 15.6569 13 14 13H10C8.34315 13 7 14.3431 7 16V19H5V11.4142Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Dashboard' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
           
                  (click)="navigateAndClose('/conventions', 'Conventions')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'conventions' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'conventions' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M4 4C2.89543 4 2 4.89543 2 6V18C2 19.1046 2.89543 20 4 20H20C21.1046 20 22 19.1046 22 18V8C22 6.89543 21.1046 6 20 6H11L9 4H4ZM4 6H9.82843L11.8284 8H20V18H4V6ZM7 10H17V12H7V10ZM7 14H13V16H7V14Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Conventions' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
           
                  (click)="navigateAndClose('/factures', 'Factures')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'factures' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'factures' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M5 3C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3H5ZM5 5H19V19H5V5ZM7 7V17H17V7H7ZM9 9H15V15H9V9ZM11 11V13H13V11H11Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Factures' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
             
                  (click)="navigateAndClose('/conventions/archives', 'ArchivedConventions')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'conventions/archives' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'conventions/archives' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor" 
                stroke-width="2"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"
                  fill="none"
                />
              </svg>
              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ ' Archive' | translate }}
              </span>
            </a>
          </li>

          <li>
            <a
             
                  (click)="navigateAndClose('/commercial/calendar', 'commercialCalendar')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'commercialCalendar' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'commercialCalendar' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M8 2C8.55228 2 9 2.44772 9 3V5H15V3C15 2.44772 15.4477 2 16 2C16.5523 2 17 2.44772 17 3V5H19C20.6569 5 22 6.34315 22 8V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V8C2 6.34315 3.34315 5 5 5H7V3C7 2.44772 7.44772 2 8 2ZM7 7H5C4.44772 7 4 7.44772 4 8V19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V8C20 7.44772 19.5523 7 19 7H17V8C17 8.55228 16.5523 9 16 9C15.4477 9 15 8.55228 15 8V7H9V8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8V7Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Calendar' | translate }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <nav *ngIf="isChefProjetUser()">
      <div>
        <h3 class="mb-3 text-xs uppercase leading-[18px] text-gray-400">
          <span
            class="menu-group-title"
            [class]="isSidebarOpen ? 'lg:hidden' : ''"
          >
          </span>
        </h3>

        <ul class="flex flex-col gap-2 mb-4">
          <li>
            <a
             
                  (click)="navigateAndClose('/chef', 'chefProjet')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'chefProjet' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'chefProjet' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.7071 2.29289C12.3166 1.90237 11.6834 1.90237 11.2929 2.29289L3.29289 10.2929C3.10536 10.4804 3 10.7348 3 11V20C3 20.5523 3.44772 21 4 21H8C8.55228 21 9 20.5523 9 20V16C9 15.4477 9.44772 15 10 15H14C14.5523 15 15 15.4477 15 16V20C15 20.5523 15.4477 21 16 21H20C20.5523 21 21 20.5523 21 20V11C21 10.7348 20.8946 10.4804 20.7071 10.2929L12.7071 2.29289ZM5 11.4142L12 4.41421L19 11.4142V19H17V16C17 14.3431 15.6569 13 14 13H10C8.34315 13 7 14.3431 7 16V19H5V11.4142Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Dashboard' | translate }}
              </span>
            </a>
          </li>

          <li >
            <a
            
                  (click)="navigateAndClose('/chef/projet', 'chef/projet')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'chef/projet' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'chef/projet' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3 3C2.44772 3 2 3.44772 2 4V20C2 20.5523 2.44772 21 3 21H21C21.5523 21 22 20.5523 22 20V4C22 3.44772 21.5523 3 21 3H3ZM4 19V5H20V19H4ZM7 7H17V9H7V7ZM7 11H17V13H7V11ZM7 15H14V17H7V15Z"
                  fill="currentColor"
                />
              </svg>
              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Projects' | translate }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <nav *ngIf="isDecideurUser()">
      <div>
        <h3 class="mb-3 text-xs uppercase leading-[18px] text-gray-400">
          <span
            class="menu-group-title"
            [class]="isSidebarOpen ? 'lg:hidden' : ''"
          >
          </span>
        </h3>

        <ul class="flex flex-col gap-2 mb-4">
          <li>
            <a
              
              
                  (click)="navigateAndClose('/decideur', 'decideur')"

              class="menu-item group cursor-pointer"
              [class]="currentPage === 'decideur' ? 'menu-item-active' : 'menu-item-inactive'"
            >
              <svg
                [class]="currentPage === 'decideur' ? 'menu-item-icon-active' : 'menu-item-icon-inactive'"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.7071 2.29289C12.3166 1.90237 11.6834 1.90237 11.2929 2.29289L3.29289 10.2929C3.10536 10.4804 3 10.7348 3 11V20C3 20.5523 3.44772 21 4 21H8C8.55228 21 9 20.5523 9 20V16C9 15.4477 9.44772 15 10 15H14C14.5523 15 15 15.4477 15 16V20C15 20.5523 15.4477 21 16 21H20C20.5523 21 21 20.5523 21 20V11C21 10.7348 20.8946 10.4804 20.7071 10.2929L12.7071 2.29289ZM5 11.4142L12 4.41421L19 11.4142V19H17V16C17 14.3431 15.6569 13 14 13H10C8.34315 13 7 14.3431 7 16V19H5V11.4142Z"
                  fill="currentColor"
                />
              </svg>

              <span
                class="menu-item-text"
                [class]="isSidebarOpen || !isDesktop ? '' : 'lg:hidden lg:group-hover:inline'"
              >
                {{ 'Dashboard' | translate }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    

   
    <!-- Spacer to push user info to bottom -->
    <div class="flex-grow"></div>
  </div>

  <!-- USER INFO SECTION AT BOTTOM -->
<div class="border-t border-gray-200 dark:border-gray-800 px-4 py-3">
  <div class="flex items-center justify-center space-x-3">
    <!-- User Avatar and Info -->
    <div class="flex items-center">
      <div class="h-8 w-8 rounded-md overflow-hidden bg-gray-200 dark:bg-gray-700">
        <img 
          [src]="getAvatarUrl()" 
          [alt]="getUserFullName()"
          class="h-full w-full object-cover"
          (error)="handleImageError($event)"
        />
      </div>
      <!-- Show user info when sidebar is expanded OR on mobile OR on hover -->
      <div class="ml-3">
        <!-- Always render the paragraphs but control visibility with classes -->
        <p class="text-sm font-medium text-gray-800 dark:text-white"
           [class]="!isDesktop ? '' : (isSidebarOpen ? '' : 'hidden lg:group-hover:block')">
          {{ getUserFullName() }}
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-400"
           [class]="!isDesktop ? '' : (isSidebarOpen ? '' : 'hidden lg:group-hover:block')">
          {{ getUserEmail() }}
        </p>
      </div>
    </div>

    <!-- Three dots menu - show when sidebar is expanded OR on mobile OR on hover -->
    <div class="relative">
      <!-- Always render button but control visibility with classes -->
      <button
        class="flex items-center justify-center h-8 w-8 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white transition-colors"
        [class]="!isDesktop ? '' : (isSidebarOpen ? '' : 'hidden lg:group-hover:block')"
        (click)="toggleUserDropdown()"
      >
        <svg 
          width="16" 
          height="16" 
          viewBox="0 0 24 24" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg"
        >
          <path 
            d="M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z" 
            fill="currentColor" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
          />
          <path 
            d="M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z" 
            fill="currentColor" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
          />
          <path 
            d="M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z" 
            fill="currentColor" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <!-- Dropdown Menu (LIKE SECOND IMAGE) -->
      <div 
        *ngIf="showUserDropdown" 
        class="absolute bottom-full right-0 mb-2 w-56 rounded-lg border border-gray-200 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800 z-50"
      >
        <div class="p-4 border-b border-gray-100 dark:border-gray-700">
          <p class="text-sm font-medium text-gray-800  dark:text-white">
            {{ getUserFullName() }}
          </p>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            {{ getUserEmail() }}
          </p>
        </div>
        
        <div class="py-1">
          <a
            routerLink="/profile"
            (click)="toggleUserDropdown()"
            class="flex items-center px-4 py-2 font-bold-900 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors"
          >
            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            View profile
          </a>
          
          <a
            href="#"
            (click)="toggleUserDropdown()"
            class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors"
          >
            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            Email Box
          </a>
        </div>
        
        <div class="py-1 border-t border-gray-100 dark:border-gray-700">
          <button
            (click)="logout(); toggleUserDropdown()"
            class="flex w-full items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-gray-700 transition-colors"
          >
            <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            Log out
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


</aside>

<div
  *ngIf="isSidebarOpen"
  (click)="layoutService.setSidebarOpen(false)"
  class="fixed inset-0 z-[99998] bg-black/50 lg:hidden"
></div>